From 03d99ea26b81dac10721bc3e07a2305d564ddfb5 Mon Sep 17 00:00:00 2001
From: Matthias Leitl <a.dead.trousers@gmail.com>
Date: Sun, 8 May 2022 19:37:58 +0200
Subject: [PATCH 1/1] releasetools: fix Unicode-objects must be encoded before
 hashing

Change-Id: Ibec736b2d91424f4f5d19a9919644eb553550df7
---
 tools/releasetools/common.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tools/releasetools/common.py b/tools/releasetools/common.py
index c5758c7f04..e6ba0af3ac 100644
--- a/tools/releasetools/common.py
+++ b/tools/releasetools/common.py
@@ -702,7 +702,7 @@ def LoadInfoDict(input_file, repacking=False):
     for partition in PARTITIONS_WITH_CARE_MAP:
       fingerprint = build_info.GetPartitionFingerprint(partition)
       if fingerprint:
-        d["avb_{}_salt".format(partition)] = sha256(fingerprint).hexdigest()
+        d["avb_{}_salt".format(partition)] = sha256(fingerprint.encode()).hexdigest()
 
   return d
 
-- 
2.25.1

